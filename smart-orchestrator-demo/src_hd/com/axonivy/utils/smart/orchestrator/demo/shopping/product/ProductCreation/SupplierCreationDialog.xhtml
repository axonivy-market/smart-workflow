<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:jsf="http://xmlns.jcp.org/jsf">

<ui:composition>
  <p:dialog id="create-supplier-dialog" widgetVar="create-supplier-dialog" width="70%" height="50%"
   modal="true" dynamic="true" responsive="true"
   header="Supplier Creation">
    <h:form id="create-supplier-form" styleClass="p-fluid product-creation-dialogs">
      <!-- Basic Information Section -->
      <div class="mb-4">
        <h3 class="text-900 font-semibold mb-3 flex align-items-center gap-2">
          <i class="pi pi-building text-primary"></i>
          Basic Information
        </h3>

        
        <div class="formgrid grid">
          <h:panelGroup layout="block" styleClass="field col-12"
            rendered="#{not empty data.similiarSuppliers}">
              <h:outputText value="Choose existing supplier" />
          </h:panelGroup>
          <h:panelGroup layout="block" styleClass="field col-12"
            rendered="#{not empty data.similiarSuppliers}">
            <p:selectOneMenu value="#{data.response.product.supplier}" converter="pojoConverter">
              <f:selectItems value="#{data.similiarSuppliers}" var="supplier"
                itemValue="#{supplier}" itemLabel="#{supplier.businessName}" />
              <p:ajax event="itemSelect" process="@form" update="@form" />
            </p:selectOneMenu>
          </h:panelGroup>
          <div class="field col-12">
            <div class="formgrid grid flex align-items-center">
              <div class="field col-12 md:col-2 mb-1">
                <p:outputLabel value="Business Name" for="supplier-business-name" />
              </div>
              <div class="field col-12 md:col-10 mb-1">
                <p:inputText id="supplier-business-name" value="#{data.response.product.supplier.businessName}" 
                             styleClass="w-full"
                             required="true" />
              </div>
            </div>
          </div>
          <div class="field col-12">
            <div class="formgrid grid flex align-items-center">
              <div class="field col-12 md:col-2 mb-1">
                <p:outputLabel value="Website" for="supplier-website" />
              </div>
              <div class="field col-12 md:col-10 mb-1">
                <p:inputText id="supplier-website" value="#{data.response.product.supplier.website}" 
                             styleClass="w-full" />
              </div>
            </div>
          </div>
          <div class="field col-12 md:col-6">
            <div class="formgrid grid flex align-items-center">
              <div class="field col-12 md:col-4 mb-1">
                <p:outputLabel value="Email" for="supplier-email" />
              </div>
              <div class="field col-12 md:col-8 mb-1 p-fluid">
                <p:inputText id="supplier-email" value="#{data.response.product.supplier.email}"
                             styleClass="w-full"
                             required="true" />
              </div>
            </div>
          </div>
          
          <div class="field col-12 md:col-6">
            <div class="formgrid grid flex align-items-center">
              <div class="field col-12 md:col-4 mb-1">
                <p:outputLabel value="Phone" for="supplier-phone" />
              </div>
              <div class="field col-12 md:col-8 mb-1">
                <p:inputText id="supplier-phone" value="#{data.response.product.supplier.phone}" 
                             styleClass="w-full" />
              </div>
            </div>
          </div>
        </div>
      
      <!-- Business Address Section -->
      <div class="mb-4">
        <h3 class="text-900 mb-3 flex align-items-center gap-2">
          <i class="pi pi-map-marker text-primary"></i>
          Business Address
        </h3>
        
        <div class="formgrid grid">
          <div class="field col-12">
            <div class="formgrid grid flex align-items-center">
              <div class="field col-12 md:col-2 mb-1">
                <p:outputLabel value="Street Address 1" for="supplier-street1" />
              </div>
              <div class="field col-12 md:col-10 mb-1">
                <p:inputText id="supplier-street1" value="#{data.response.product.supplier.businessAddress.street1}" 
                             styleClass="w-full" />
              </div>
            </div>
          </div>
        </div>
        
        <div class="formgrid grid">
          <div class="field col-12">
            <div class="formgrid grid flex align-items-center">
              <div class="field col-12 md:col-2 mb-1">
                <p:outputLabel value="Street Address 2" for="supplier-street2" />
              </div>
              <div class="field col-12 md:col-10 mb-1">
                <p:inputText id="supplier-street2" value="#{data.response.product.supplier.businessAddress.street2}" 
                             styleClass="w-full" />
              </div>
            </div>
          </div>
        </div>
        
        <div class="formgrid grid">
          <div class="field col-12 md:col-6">
            <div class="formgrid grid flex align-items-center">
              <div class="field col-12 md:col-4 mb-1">
                <p:outputLabel value="City" for="supplier-city" />
              </div>
              <div class="field col-12 md:col-8 mb-1">
                <p:inputText id="supplier-city" value="#{data.response.product.supplier.businessAddress.city}" 
                             styleClass="w-full" />
              </div>
            </div>
          </div>
          
          <div class="field col-12 md:col-6">
            <div class="formgrid grid flex align-items-center">
              <div class="field col-12 md:col-4 mb-1">
                <p:outputLabel value="State/Province" for="supplier-state" />
              </div>
              <div class="field col-12 md:col-8 mb-1">
                <p:inputText id="supplier-state" value="#{data.response.product.supplier.businessAddress.state}" 
                             styleClass="w-full" />
              </div>
            </div>
          </div>
        </div>
        
        <div class="formgrid grid">
          <div class="field col-12 md:col-6">
            <div class="formgrid grid flex align-items-center">
              <div class="field col-12 md:col-4 mb-1">
                <p:outputLabel value="Zip/Postal Code" for="supplier-zipcode" />
              </div>
              <div class="field col-12 md:col-8 mb-1">
                <p:inputText id="supplier-zipcode" value="#{data.response.product.supplier.businessAddress.zipCode}" 
                             styleClass="w-full" />
              </div>
            </div>
          </div>
          
          <div class="field col-12 md:col-6">
            <div class="formgrid grid flex align-items-center">
              <div class="field col-12 md:col-4 mb-1">
                <p:outputLabel value="Country" for="supplier-country" />
              </div>
              <div class="field col-12 md:col-8 mb-1">
                <p:inputText id="supplier-country" value="#{data.response.product.supplier.businessAddress.country}" 
                             styleClass="w-full" />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </h:form>

    <!-- Action Buttons -->
    <f:facet name="footer">
          <div class="flex justify-content-end gap-2 pt-3 border-top-1 surface-border">
      <p:commandButton value="Cancel" type="button" 
                      onclick="PF('create-supplier-dialog').hide();" 
                      styleClass="p-button-outlined" 
                      icon="pi pi-times" />
      <p:commandButton value="Resolve" actionListener="#{logic.createSupplier}" 
                      process="create-supplier-form" update="create-supplier-form #{p:resolveFirstComponentWithId('result-form', view).clientId}" 
                      oncomplete="PF('create-supplier-dialog').hide();" 
                      styleClass="p-button-success" 
                      icon="pi pi-check" />
    </div>
    </f:facet>
  </p:dialog>
</ui:composition>
</html>