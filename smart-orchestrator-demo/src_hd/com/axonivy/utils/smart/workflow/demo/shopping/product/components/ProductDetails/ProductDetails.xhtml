<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions"
  xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:jsf="http://xmlns.jcp.org/jsf"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
  xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

<cc:interface componentType="IvyComponent">
  <cc:attribute name="product" required="true" />
</cc:interface>

<cc:implementation>
  <h:outputStylesheet library="css" name="shopping-product-details.css" />
  <c:set value="#{cc.attrs.product}" var="product" />
  <p:tabView styleClass="bg-white border-round-lg shadow-2 border-1 surface-border">
  <!-- Basic Information Tab -->
  <p:tab title="Basic Information">
    <div class="formgrid grid p-3">
      <div class="col-6 p-0">
        <div class="field col-12">
          <img src="#{product.imageUrl}" class="w-8 border-round-lg shadow-2 border-1 surface-border" />
        </div>
      </div>
      <div class="col-6 p-0">
        <div class="field col-12">
          <label class="font-semibold text-900">Product Name</label>
          <p:inputText value="#{product.name}" styleClass="w-full mt-1" />
        </div>
        <div class="field col-12">
          <label class="font-semibold text-900">SKU</label>
          <p:inputText value="#{product.sku}" styleClass="w-full mt-1" />
        </div>
        <div class="field col-12">
          <label class="font-semibold text-900">Unit Price</label>
          <p:inputText value="#{product.unitPrice}" styleClass="w-full mt-1" />
        </div>

        <div class="field col-12">
          <label class="font-semibold text-900">Status</label>
          <div class="mt-1">
            <p:selectBooleanCheckbox value="#{product.active}" />
            <span class="ml-2">Active</span>
          </div>
        </div>

        <div class="field col-12">
        <label class="font-semibold text-900">Description</label>
        <p:inputTextarea value="#{product.description}" rows="3" styleClass="w-full mt-1" autoResize="true" />
      </div>
      </div>
    </div>
  </p:tab>
  
  <!-- Category &amp; Brand Tab -->
  <p:tab title="Category &amp; Brand">
    <div class="formgrid grid p-3">
      <!-- Category Section -->
      <div class="field col-12">
        <h5 class="text-900 mb-3 flex align-items-center gap-2">
          <i class="pi pi-tags text-primary"></i>
          Product Category
        </h5>
      </div>
      
      <div class="field col-12 md:col-6">
        <label class="font-semibold text-900">Category Name</label>
        <p class="mt-1 text-700">#{product.category.name}</p>
      </div>
      
      <div class="field col-12 md:col-6">
        <label class="font-semibold text-900">Category ID</label>
        <p class="mt-1 text-700">#{product.category.categoryId}</p>
      </div>
      
      <div class="field col-12">
        <label class="font-semibold text-900">Category Description</label>
        <p class="mt-1 text-700">#{product.category.description}</p>
      </div>
      
      <!-- Brand Section -->
      <div class="field col-12">
        <h5 class="text-900 mb-3 mt-4 flex align-items-center gap-2">
          <i class="pi pi-star text-primary"></i>
          Brand Information
        </h5>
      </div>
      
      <div class="field col-12 md:col-6">
        <label class="font-semibold text-900">Brand Name</label>
        <p class="mt-1 text-700">#{product.brand.name}</p>
      </div>
      
      <div class="field col-12 md:col-6">
        <label class="font-semibold text-900">Brand ID</label>
        <p class="mt-1 text-700">#{product.brand.brandId}</p>
      </div>
      
      <div class="field col-12 md:col-6">
        <label class="font-semibold text-900">Website</label>
        <p class="mt-1 text-700">
          <a href="#{product.brand.website}" target="_blank" class="text-primary">
            #{product.brand.website}
          </a>
        </p>
      </div>
      
      <div class="field col-12 md:col-6">
        <label class="font-semibold text-900">Logo</label>
        <div class="mt-1">
          <h:panelGroup rendered="#{not empty product.brand.logoBase64}">
            <img src="#{product.brand.logoBase64}" 
                 alt="Brand Logo" 
                 class="max-w-5rem max-h-5rem object-fit-contain border-round border-1 surface-border" />
          </h:panelGroup>
          <h:panelGroup rendered="#{empty product.brand.logoBase64}">
            <span class="text-500">No logo available</span>
          </h:panelGroup>
        </div>
      </div>
      
      <div class="field col-12">
        <label class="font-semibold text-900">Brand Description</label>
        <p class="mt-1 text-700">#{product.brand.description}</p>
      </div>
    </div>
  </p:tab>
  
  <!-- Supplier Information Tab -->
  <p:tab title="Supplier">
    <div class="formgrid grid p-3">
      <div class="field col-12 md:col-6">
        <label class="font-semibold text-900">Business Name</label>
        <p class="mt-1 text-700">#{product.supplier.businessName}</p>
      </div>
      
      <div class="field col-12 md:col-6">
        <label class="font-semibold text-900">Email</label>
        <p class="mt-1 text-700">
          <a href="mailto:#{product.supplier.email}" class="text-primary">
            #{product.supplier.email}
          </a>
        </p>
      </div>
      
      <div class="field col-12 md:col-6">
        <label class="font-semibold text-900">Phone</label>
        <p class="mt-1 text-700">#{product.supplier.phone}</p>
      </div>
      
      <div class="field col-12 md:col-6">
        <label class="font-semibold text-900">Website</label>
        <p class="mt-1 text-700">
          <a href="#{product.supplier.website}" target="_blank" class="text-primary">
            #{product.supplier.website}
          </a>
        </p>
      </div>
      
      <div class="field col-12">
        <label class="font-semibold text-900">Business Address</label>
        <p class="mt-1 text-700">#{product.supplier.businessAddress}</p>
      </div>
    </div>
  </p:tab>
  
  <!-- Additional Information Tab -->
  <p:tab title="Additional Info">
    <div class="p-3">
      <h:panelGroup rendered="#{not empty product.otherInformations}">
        <p:dataTable value="#{product.otherInformations}"
                    var="info" styleClass="p-datatable-sm" editable="true">
          <p:column headerText="Property">
            <p:cellEditor>
              <f:facet name="output">
                <span class="font-semibold">#{info.name}</span>
              </f:facet>
              <f:facet name="input">
                <p:inputText value="#{info.name}" styleClass="font-semibold" />
              </f:facet>
            </p:cellEditor>
          </p:column>
          <p:column headerText="Value">
            <p:cellEditor>
              <f:facet name="output">
                <span>#{info.value}</span>
              </f:facet>
              <f:facet name="input">
                <p:inputText value="#{info.value}" />
              </f:facet>
            </p:cellEditor>
          </p:column>
          <p:column headerText="Actions" width="70">
            <p:rowEditor />
          </p:column>
        </p:dataTable>
      </h:panelGroup>
      
      <h:panelGroup rendered="#{empty product.otherInformations}">
        <div class="text-center p-4">
          <i class="pi pi-info-circle text-400 text-2xl mb-2"></i>
          <p class="text-500 m-0">No additional information available</p>
        </div>
      </h:panelGroup>
    </div>
  </p:tab>
</p:tabView>
</cc:implementation>
</html>